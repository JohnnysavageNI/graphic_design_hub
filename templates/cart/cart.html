{% extends "base.html" %}
{% block content %}
<div class="container pt-5 mt-5 text-white">
  <h1 class="mb-4">Your Cart</h1>

  {% if cart_items %}
    <ul class="list-group mb-4" style="max-width: 600px;">
      {% for item in cart_items %}
        <!-- Flex row: left grows, right stays tight and on the same line -->
        <li class="list-group-item bg-dark text-white d-flex align-items-center">
          <!-- Left: title × qty -->
          <div class="flex-fill pr-2 text-truncate">
            {{ item.service.name }} × {{ item.qty }}
          </div>

          <!-- Right: price + buttons (no wrapping) -->
          <div class="d-flex align-items-center ml-auto" style="flex:0 0 auto;">
            <div class="text-right mr-3" style="min-width:6rem; white-space:nowrap;">
              ${{ item.line_total|floatformat:2 }}
            </div>

            <form action="{% url 'decrement_from_cart' item.service.id %}" method="post" class="d-inline m-0 p-0 mr-2">
              {% csrf_token %}
              <button type="submit" class="btn btn-sm btn-warning" title="Decrease quantity">−</button>
            </form>

            <form action="{% url 'remove_from_cart' item.service.id %}" method="post" class="d-inline m-0 p-0">
              {% csrf_token %}
              <button type="submit" class="btn btn-sm btn-danger" title="Remove item">
                <i class="fas fa-trash"></i>
              </button>
            </form>
          </div>
        </li>
      {% endfor %}

      <li class="list-group-item d-flex justify-content-between font-weight-bold bg-dark text-white">
        <span>Total</span>
        <span>${{ cart_subtotal|default:grand_total|default:"0.00"|floatformat:2 }}</span>
      </li>
    </ul>

    <a href="{% url 'checkout' %}" class="btn btn-success" style="max-width: 200px;">Proceed to Checkout</a>
  {% else %}
    <div class="alert alert-info">Your cart is empty.</div>
  {% endif %}
</div>
{% endblock %}